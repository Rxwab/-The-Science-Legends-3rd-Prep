<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¹Ù„ÙˆÙ… - Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            direction: rtl;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header h1 {
            color: white;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.2em;
        }

        .login-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            margin: 0 auto;
        }

        .login-container h2 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: bold;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.3s;
            width: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .main-dashboard {
            display: none;
        }

        .user-info {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .user-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            color: #667eea;
            border: 3px solid rgba(255, 255, 255, 0.3);
        }

        .user-details h3 {
            color: white;
            margin-bottom: 5px;
        }

        .user-details p {
            color: rgba(255, 255, 255, 0.8);
        }

        .rooms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .room-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            border: 2px solid transparent;
        }

        .room-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            border-color: #667eea;
        }

        .room-card h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .room-card p {
            color: #666;
            margin-bottom: 20px;
        }

        .room-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .questions-room { color: #4CAF50; }
        .news-room { color: #FF9800; }
        .homework-room { color: #2196F3; }
        .explanations-room { color: #9C27B0; }
        .chat-room { color: #F44336; }
        .leaderboard-room { color: #FFD700; }
        .store-room { color: #E91E63; }
        .profile-room { color: #607D8B; }

        .room-content {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-top: 20px;
        }

        .back-btn {
            background: #666;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 20px;
        }

        .question-container {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.2em;
            margin-bottom: 15px;
            color: #333;
        }

        .answers {
            display: grid;
            gap: 10px;
        }

        .answer-btn {
            background: white;
            border: 2px solid #ddd;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: right;
        }

        .answer-btn:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .answer-btn.correct {
            background: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }

        .answer-btn.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }

        .score-display {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.2em;
            font-weight: bold;
        }

        .message {
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            animation: fadeIn 0.5s;
        }

        .message.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .message.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .chat-container {
            height: 400px;
            border: 1px solid #ddd;
            border-radius: 10px;
            overflow-y: auto;
            padding: 15px;
            background: #f9f9f9;
            margin-bottom: 15px;
        }

        .chat-message {
            background: white;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #667eea;
        }

        .chat-input {
            display: flex;
            gap: 10px;
        }

        .chat-input input {
            flex: 1;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        .store-items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .store-item {
            background: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            border: 2px solid #ddd;
            transition: all 0.3s;
        }

        .store-item:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .store-item.owned {
            border-color: #4CAF50;
            background: #f0f8f0;
        }

        .leaderboard {
            background: white;
            border-radius: 10px;
            overflow: hidden;
        }

        .leaderboard-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #eee;
        }

        .leaderboard-item:nth-child(1) { background: linear-gradient(135deg, #FFD700, #FFA500); color: white; }
        .leaderboard-item:nth-child(2) { background: linear-gradient(135deg, #C0C0C0, #A0A0A0); color: white; }
        .leaderboard-item:nth-child(3) { background: linear-gradient(135deg, #CD7F32, #B8860B); color: white; }

        .rank {
            font-size: 1.5em;
            font-weight: bold;
            margin-left: 15px;
            min-width: 40px;
        }

        .teacher-badge {
            background: linear-gradient(135deg, #FF6B6B, #4ECDC4);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-right: 10px;
        }

        .admin-panel {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .admin-panel h3 {
            color: white;
            margin-bottom: 15px;
        }

        .admin-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .admin-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .admin-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .hidden {
            display: none !important;
        }

        .error-text {
            color: #f44336;
            font-size: 0.9em;
            margin-top: 5px;
        }

        .success-text {
            color: #4CAF50;
            font-size: 0.9em;
            margin-top: 5px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .login-container {
                padding: 20px;
            }
            
            .rooms-grid {
                grid-template-columns: 1fr;
            }
            
            .user-info {
                flex-direction: column;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”¬ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ</h1>
            <p>Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ - Ø§Ù„Ø­Ø±ÙƒØ© ÙˆØ§Ù„Ø³Ø±Ø¹Ø©</p>
        </div>

        <!-- ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
        <div id="loginPage" class="login-container">
            <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="fullName">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ *</label>
                    <input type="text" id="fullName" required placeholder="Ù…Ø«Ø§Ù„: Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ">
                    <div id="nameError" class="error-text hidden">ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ (Ø£ÙƒØ«Ø± Ù…Ù† ÙƒÙ„Ù…Ø© ÙˆØ§Ø­Ø¯Ø©)</div>
                </div>

                <div class="form-group">
                    <label for="age">Ø§Ù„Ø¹Ù…Ø± *</label>
                    <input type="number" id="age" required min="10" max="20" placeholder="Ù…Ø«Ø§Ù„: 15">
                </div>

                <div class="form-group">
                    <label for="password">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± *</label>
                    <input type="password" id="password" required placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
                </div>

                <div class="form-group">
                    <label for="profileImage">Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                    <input type="file" id="profileImage" accept="image/*">
                </div>

                <button type="submit" class="btn">Ø¯Ø®ÙˆÙ„</button>
            </form>
        </div>

        <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
        <div id="mainDashboard" class="main-dashboard">
            <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">ğŸ‘¤</div>
                <div class="user-details">
                    <h3 id="userName"></h3>
                    <p id="userAge"></p>
                    <p id="userPoints">Ø§Ù„Ù†Ù‚Ø§Ø·: 0</p>
                </div>
            </div>

            <!-- Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø³ØªØ§Ø° -->
            <div id="adminPanel" class="admin-panel hidden">
                <h3>ğŸ“ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø³ØªØ§Ø°</h3>
                <div class="admin-controls">
                    <button class="admin-btn" onclick="clearAllChat()">Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</button>
                    <button class="admin-btn" onclick="resetAllScores()">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù‚Ø§Ø·</button>
                    <button class="admin-btn" onclick="exportData()">ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
                </div>
            </div>

            <!-- Ø§Ù„Ø±ÙˆÙ…Ø§Øª -->
            <div class="rooms-grid">
                <div class="room-card" onclick="openRoom('questions')">
                    <div class="room-icon questions-room">â“</div>
                    <h3>Ø±ÙˆÙ… Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</h3>
                    <p>100 Ø³Ø¤Ø§Ù„ ÙÙŠ Ø§Ù„Ø¹Ù„ÙˆÙ… - Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù†Ù‚Ø·Ø© Ù„ÙƒÙ„ Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©</p>
                </div>

                <div class="room-card" id="newsRoomCard" onclick="openRoom('news')">
                    <div class="room-icon news-room">ğŸ“°</div>
                    <h3>Ø±ÙˆÙ… Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</h3>
                    <p>Ø¢Ø®Ø± Ø§Ù„Ø£Ø®Ø¨Ø§Ø± ÙˆØ§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ù…Ù‡Ù…Ø©</p>
                </div>

                <div class="room-card" onclick="openRoom('homework')">
                    <div class="room-icon homework-room">ğŸ“š</div>
                    <h3>Ø±ÙˆÙ… Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª</h3>
                    <p>Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª ÙˆØ§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©</p>
                </div>

                <div class="room-card" onclick="openRoom('explanations')">
                    <div class="room-icon explanations-room">ğŸ“</div>
                    <h3>Ø±ÙˆÙ… Ø§Ù„Ø´Ø±ÙˆØ­Ø§Øª</h3>
                    <p>Ø´Ø±ÙˆØ­Ø§Øª Ù…ÙØµÙ„Ø© Ù„Ù„Ø¯Ø±ÙˆØ³</p>
                </div>

                <div class="room-card" onclick="openRoom('chat')">
                    <div class="room-icon chat-room">ğŸ’¬</div>
                    <h3>Ø±ÙˆÙ… Ø§Ù„Ø´Ø§Øª</h3>
                    <p>Ø¯Ø±Ø¯Ø´Ø© Ù…Ø¹ Ø²Ù…Ù„Ø§Ø¦Ùƒ ÙÙŠ Ø§Ù„ØµÙ</p>
                </div>

                <div class="room-card" onclick="openRoom('leaderboard')">
                    <div class="room-icon leaderboard-room">ğŸ†</div>
                    <h3>Ø§Ù„Ø£ÙˆØ§Ø¦Ù„</h3>
                    <p>ØªØ±ØªÙŠØ¨ Ø£ÙØ¶Ù„ 100 Ø·Ø§Ù„Ø¨</p>
                </div>

                <div class="room-card" onclick="openRoom('store')">
                    <div class="room-icon store-room">ğŸ›’</div>
                    <h3>Ø§Ù„Ù…ØªØ¬Ø±</h3>
                    <p>Ø§Ø´ØªØ±ÙŠ Ø¥Ø·Ø§Ø±Ø§Øª ÙˆØ®Ù„ÙÙŠØ§Øª Ø¨Ø§Ù„Ù†Ù‚Ø§Ø·</p>
                </div>

                <div class="room-card" onclick="openRoom('profile')">
                    <div class="room-icon profile-room">ğŸ‘¤</div>
                    <h3>Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</h3>
                    <p>Ø¥Ø¯Ø§Ø±Ø© Ø­Ø³Ø§Ø¨Ùƒ ÙˆÙ…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ</p>
                </div>
            </div>
        </div>

        <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±ÙˆÙ…Ø§Øª -->
        <div id="questionsRoom" class="room-content">
            <button class="back-btn" onclick="closeRoom()">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
            <h2>ğŸ”¬ Ø±ÙˆÙ… Ø§Ù„Ø£Ø³Ø¦Ù„Ø© - Ø§Ù„Ø¹Ù„ÙˆÙ…</h2>
            <div class="score-display">
                Ù†Ù‚Ø§Ø·Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ©: <span id="currentScore">0</span>
            </div>
            <div id="questionContainer"></div>
            <div id="questionMessage"></div>
        </div>

        <div id="newsRoom" class="room-content">
            <button class="back-btn" onclick="closeRoom()">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
            <h2>ğŸ“° Ø±ÙˆÙ… Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</h2>
            <div id="newsContainer"></div>
            <div id="addNewsForm" class="hidden">
                <h3>Ø¥Ø¶Ø§ÙØ© Ø®Ø¨Ø± Ø¬Ø¯ÙŠØ¯</h3>
                <input type="text" id="newsTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø®Ø¨Ø±">
                <textarea id="newsContent" placeholder="Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø®Ø¨Ø±" rows="4" style="width: 100%; margin: 10px 0; padding: 10px; border-radius: 8px; border: 1px solid #ddd;"></textarea>
                <input type="file" id="newsImage" accept="image/*">
                <input type="url" id="newsLink" placeholder="Ø±Ø§Ø¨Ø· (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">
                <button class="btn" onclick="addNews()">Ù†Ø´Ø± Ø§Ù„Ø®Ø¨Ø±</button>
            </div>
        </div>

        <div id="homeworkRoom" class="room-content">
            <button class="back-btn" onclick="closeRoom()">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
            <h2>ğŸ“š Ø±ÙˆÙ… Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª</h2>
            <button class="btn" onclick="showAddHomeworkForm()" style="margin-bottom: 20px;">Ø¥Ø¶Ø§ÙØ© ÙˆØ§Ø¬Ø¨ Ø¬Ø¯ÙŠØ¯</button>
            <div id="homeworkContainer"></div>
            <div id="addHomeworkForm" class="hidden">
                <h3>Ø¥Ø¶Ø§ÙØ© ÙˆØ§Ø¬Ø¨ Ø¬Ø¯ÙŠØ¯</h3>
                <input type="text" id="homeworkTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙˆØ§Ø¬Ø¨">
                <textarea id="homeworkDescription" placeholder="ÙˆØµÙ Ø§Ù„ÙˆØ§Ø¬Ø¨" rows="4" style="width: 100%; margin: 10px 0; padding: 10px; border-radius: 8px; border: 1px solid #ddd;"></textarea>
                <input type="file" id="homeworkImage" accept="image/*">
                <input type="url" id="homeworkVideo" placeholder="Ø±Ø§Ø¨Ø· ÙÙŠØ¯ÙŠÙˆ (ÙŠÙˆØªÙŠÙˆØ¨ Ø£Ùˆ ØºÙŠØ±Ù‡)">
                <button class="btn" onclick="addHomework()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙˆØ§Ø¬Ø¨</button>
            </div>
        </div>

        <div id="explanationsRoom" class="room-content">
            <button class="back-btn" onclick="closeRoom()">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
            <h2>ğŸ“ Ø±ÙˆÙ… Ø§Ù„Ø´Ø±ÙˆØ­Ø§Øª</h2>
            <button class="btn" onclick="showAddExplanationForm()" style="margin-bottom: 20px;">Ø¥Ø¶Ø§ÙØ© Ø´Ø±Ø­ Ø¬Ø¯ÙŠØ¯</button>
            <div id="explanationsContainer"></div>
            <div id="addExplanationForm" class="hidden">
                <h3>Ø¥Ø¶Ø§ÙØ© Ø´Ø±Ø­ Ø¬Ø¯ÙŠØ¯</h3>
                <input type="text" id="explanationTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø´Ø±Ø­">
                <textarea id="explanationContent" placeholder="Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø´Ø±Ø­" rows="6" style="width: 100%; margin: 10px 0; padding: 10px; border-radius: 8px; border: 1px solid #ddd;"></textarea>
                <input type="file" id="explanationImage" accept="image/*">
                <input type="url" id="explanationVideo" placeholder="Ø±Ø§Ø¨Ø· ÙÙŠØ¯ÙŠÙˆ (ÙŠÙˆØªÙŠÙˆØ¨ Ø£Ùˆ ØºÙŠØ±Ù‡)">
                <button class="btn" onclick="addExplanation()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø´Ø±Ø­</button>
            </div>
        </div>

        <div id="chatRoom" class="room-content">
            <button class="back-btn" onclick="closeRoom()">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
            <h2>ğŸ’¬ Ø±ÙˆÙ… Ø§Ù„Ø´Ø§Øª</h2>
            <div class="chat-container" id="chatContainer"></div>
            <div class="chat-input">
                <input type="text" id="chatMessage" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..." onkeypress="handleChatKeyPress(event)">
                <button class="btn" onclick="sendMessage()">Ø¥Ø±Ø³Ø§Ù„</button>
            </div>
        </div>

        <div id="leaderboardRoom" class="room-content">
            <button class="back-btn" onclick="closeRoom()">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
            <h2>ğŸ† Ø§Ù„Ø£ÙˆØ§Ø¦Ù„</h2>
            <div class="leaderboard" id="leaderboardContainer"></div>
        </div>

        <div id="storeRoom" class="room-content">
            <button class="back-btn" onclick="closeRoom()">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
            <h2>ğŸ›’ Ø§Ù„Ù…ØªØ¬Ø±</h2>
            <div class="score-display">
                Ù†Ù‚Ø§Ø·Ùƒ Ø§Ù„Ù…ØªØ§Ø­Ø©: <span id="storeScore">0</span>
            </div>
            <div class="store-items" id="storeContainer"></div>
        </div>

        <div id="profileRoom" class="room-content">
            <button class="back-btn" onclick="closeRoom()">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
            <h2>ğŸ‘¤ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</h2>
            <div id="profileContainer"></div>
        </div>
    </div>

    <script>
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
        const questions = [
            {
                question: "Ù…Ø§ Ù‡ÙŠ ÙˆØ­Ø¯Ø© Ù‚ÙŠØ§Ø³ Ø§Ù„Ø³Ø±Ø¹Ø© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯ÙˆÙ„ÙŠØŸ",
                answers: ["Ù…ØªØ±/Ø«Ø§Ù†ÙŠØ©", "ÙƒÙŠÙ„ÙˆÙ…ØªØ±/Ø³Ø§Ø¹Ø©", "Ø³Ù†ØªÙŠÙ…ØªØ±/Ø«Ø§Ù†ÙŠØ©", "Ù…ÙŠÙ„/Ø³Ø§Ø¹Ø©"],
                correct: 0,
                explanation: "ÙˆØ­Ø¯Ø© Ù‚ÙŠØ§Ø³ Ø§Ù„Ø³Ø±Ø¹Ø© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯ÙˆÙ„ÙŠ Ù‡ÙŠ Ù…ØªØ±/Ø«Ø§Ù†ÙŠØ© (Ù…/Ø«)"
            },
            {
                question: "Ø¥Ø°Ø§ Ù‚Ø·Ø¹ Ø¬Ø³Ù… Ù…Ø³Ø§ÙØ© 100 Ù…ØªØ± ÙÙŠ 10 Ø«ÙˆØ§Ù†ÙØŒ ÙÙ…Ø§ Ø³Ø±Ø¹ØªÙ‡ØŸ",
                answers: ["5 Ù…/Ø«", "10 Ù…/Ø«", "15 Ù…/Ø«", "20 Ù…/Ø«"],
                correct: 1,
                explanation: "Ø§Ù„Ø³Ø±Ø¹Ø© = Ø§Ù„Ù…Ø³Ø§ÙØ© Ã· Ø§Ù„Ø²Ù…Ù† = 100 Ã· 10 = 10 Ù…/Ø«"
            },
            {
                question: "Ù…Ø§ Ø§Ù„Ù…Ù‚ØµÙˆØ¯ Ø¨Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ù…Ù†ØªØ¸Ù…Ø©ØŸ",
                answers: ["Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„ØªÙŠ ØªØªØºÙŠØ± Ø¨Ø§Ù†ØªØ¸Ø§Ù…", "Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ø«Ø§Ø¨ØªØ©", "Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ø¹Ø§Ù„ÙŠØ©", "Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ù…Ù†Ø®ÙØ¶Ø©"],
                correct: 1,
                explanation: "Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ù…Ù†ØªØ¸Ù…Ø© Ù‡ÙŠ Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ø«Ø§Ø¨ØªØ© Ø§Ù„ØªÙŠ Ù„Ø§ ØªØªØºÙŠØ± Ù…Ø¹ Ø§Ù„Ø²Ù…Ù†"
            },
            {
                question: "Ø£ÙŠ Ù…Ù† Ø§Ù„ØªØ§Ù„ÙŠ ÙŠÙ…Ø«Ù„ Ø­Ø±ÙƒØ© Ù…Ù†ØªØ¸Ù…Ø©ØŸ",
                answers: ["Ø³ÙŠØ§Ø±Ø© ØªØ³ÙŠØ± Ø¨Ø³Ø±Ø¹Ø© Ø«Ø§Ø¨ØªØ©", "ÙƒØ±Ø© ØªØ³Ù‚Ø· Ù…Ù† Ø¹Ù„Ùˆ", "Ù‚Ø·Ø§Ø± ÙŠØªÙˆÙ‚Ù", "Ø¯Ø±Ø§Ø¬Ø© ØªØ³Ø±Ø¹"],
                correct: 0,
                explanation: "Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ù†ØªØ¸Ù…Ø© Ù‡ÙŠ Ø§Ù„ØªÙŠ ØªØªÙ… Ø¨Ø³Ø±Ø¹Ø© Ø«Ø§Ø¨ØªØ© Ø¯ÙˆÙ† ØªØ³Ø§Ø±Ø¹ Ø£Ùˆ ØªØ¨Ø§Ø·Ø¤"
            },
            {
                question: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ù†Ø³Ø¨ÙŠØ©ØŸ",
                answers: ["Ø³Ø±Ø¹Ø© Ø§Ù„Ø¬Ø³Ù… Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ù„Ø£Ø±Ø¶", "Ø³Ø±Ø¹Ø© Ø§Ù„Ø¬Ø³Ù… Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ø¬Ø³Ù… Ø¢Ø®Ø±", "Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ù‚ØµÙˆÙ‰ Ù„Ù„Ø¬Ø³Ù…", "Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ø¯Ù†ÙŠØ§ Ù„Ù„Ø¬Ø³Ù…"],
                correct: 1,
                explanation: "Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ù†Ø³Ø¨ÙŠØ© Ù‡ÙŠ Ø³Ø±Ø¹Ø© Ø¬Ø³Ù… Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ø¬Ø³Ù… Ø¢Ø®Ø± Ù…ØªØ­Ø±Ùƒ"
            },
            {
                question: "Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø³Ø±Ø¹Ø© Ù‚Ø·Ø§Ø± 60 ÙƒÙ…/Ø³Ø§Ø¹Ø©ØŒ ÙÙƒÙ… ØªØ³Ø§ÙˆÙŠ Ø¨Ø§Ù„Ù…ØªØ±/Ø«Ø§Ù†ÙŠØ©ØŸ",
                answers: ["16.67 Ù…/Ø«", "20 Ù…/Ø«", "60 Ù…/Ø«", "216 Ù…/Ø«"],
                correct: 0,
                explanation: "Ù„Ù„ØªØ­ÙˆÙŠÙ„ Ù…Ù† ÙƒÙ…/Ø³Ø§Ø¹Ø© Ø¥Ù„Ù‰ Ù…/Ø« Ù†Ù‚Ø³Ù… Ø¹Ù„Ù‰ 3.6: 60 Ã· 3.6 = 16.67 Ù…/Ø«"
            },
            {
                question: "Ù…Ø§ Ù‡Ùˆ Ù‚Ø§Ù†ÙˆÙ† Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø±Ø¹Ø©ØŸ",
                answers: ["Ø§Ù„Ø³Ø±Ø¹Ø© = Ø§Ù„Ø²Ù…Ù† Ã· Ø§Ù„Ù…Ø³Ø§ÙØ©", "Ø§Ù„Ø³Ø±Ø¹Ø© = Ø§Ù„Ù…Ø³Ø§ÙØ© Ã— Ø§Ù„Ø²Ù…Ù†", "Ø§Ù„Ø³Ø±Ø¹Ø© = Ø§Ù„Ù…Ø³Ø§ÙØ© Ã· Ø§Ù„Ø²Ù…Ù†", "Ø§Ù„Ø³Ø±Ø¹Ø© = Ø§Ù„Ù…Ø³Ø§ÙØ© + Ø§Ù„Ø²Ù…Ù†"],
                correct: 2,
                explanation: "Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø³Ø±Ø¹Ø© Ù‡Ùˆ: Ø§Ù„Ø³Ø±Ø¹Ø© = Ø§Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„Ù…Ù‚Ø·ÙˆØ¹Ø© Ã· Ø§Ù„Ø²Ù…Ù† Ø§Ù„Ù…Ø³ØªØºØ±Ù‚"
            },
            {
                question: "Ø£ÙŠ Ù…Ù† Ø§Ù„ØªØ§Ù„ÙŠ ÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ù†Ø³Ø¨ÙŠØ©ØŸ",
                answers: ["Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø­Ø±ÙƒØ© ÙÙ‚Ø·", "Ù…Ù‚Ø¯Ø§Ø± Ø§Ù„Ø³Ø±Ø¹Ø© ÙÙ‚Ø·", "ÙƒÙ„ Ù…Ù† Ø§Ù„Ù…Ù‚Ø¯Ø§Ø± ÙˆØ§Ù„Ø§ØªØ¬Ø§Ù‡", "Ù„Ø§ Ø´ÙŠØ¡ Ù…Ù…Ø§ Ø³Ø¨Ù‚"],
                correct: 2,
                explanation: "Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ù†Ø³Ø¨ÙŠØ© ØªØªØ£Ø«Ø± Ø¨ÙƒÙ„ Ù…Ù† Ù…Ù‚Ø¯Ø§Ø± Ø§Ù„Ø³Ø±Ø¹Ø© ÙˆØ§ØªØ¬Ø§Ù‡ Ø§Ù„Ø­Ø±ÙƒØ© Ù„Ù„Ø¬Ø³Ù…ÙŠÙ†"
            },
            {
                question: "Ù…Ø§ Ù‡ÙŠ ÙˆØ­Ø¯Ø© Ù‚ÙŠØ§Ø³ Ø§Ù„Ù…Ø³Ø§ÙØ© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯ÙˆÙ„ÙŠØŸ",
                answers: ["Ø§Ù„ÙƒÙŠÙ„ÙˆÙ…ØªØ±", "Ø§Ù„Ø³Ù†ØªÙŠÙ…ØªØ±", "Ø§Ù„Ù…ØªØ±", "Ø§Ù„Ù…ÙŠÙ„"],
                correct: 2,
                explanation: "ÙˆØ­Ø¯Ø© Ù‚ÙŠØ§Ø³ Ø§Ù„Ù…Ø³Ø§ÙØ© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯ÙˆÙ„ÙŠ Ù‡ÙŠ Ø§Ù„Ù…ØªØ±"
            },
            {
                question: "Ø¥Ø°Ø§ ØªØ­Ø±Ùƒ Ø¬Ø³Ù… Ø¨Ø³Ø±Ø¹Ø© 20 Ù…/Ø« Ù„Ù…Ø¯Ø© 5 Ø«ÙˆØ§Ù†ÙØŒ ÙÙ…Ø§ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„Ù…Ù‚Ø·ÙˆØ¹Ø©ØŸ",
                answers: ["4 Ù…ØªØ±", "25 Ù…ØªØ±", "100 Ù…ØªØ±", "15 Ù…ØªØ±"],
                correct: 2,
                explanation: "Ø§Ù„Ù…Ø³Ø§ÙØ© = Ø§Ù„Ø³Ø±Ø¹Ø© Ã— Ø§Ù„Ø²Ù…Ù† = 20 Ã— 5 = 100 Ù…ØªØ±"
            }
        ];

        // Ù…ØªØºÙŠØ±Ø§Øª Ø¹Ø§Ù…Ø©
        let currentUser = null;
        let currentQuestionIndex = 0;
        let userScore = 0;
        let isTeacher = false;

        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¬Ø±
        const storeItems = [
            { id: 1, name: "Ø¥Ø·Ø§Ø± Ø°Ù‡Ø¨ÙŠ", price: 50, type: "frame", color: "#FFD700" },
            { id: 2, name: "Ø¥Ø·Ø§Ø± Ø£Ø²Ø±Ù‚", price: 30, type: "frame", color: "#4169E1" },
            { id: 3, name: "Ø®Ù„ÙÙŠØ© ÙØ®Ù…Ø©", price: 100, type: "background", image: "gradient(135deg, #667eea 0%, #764ba2 100%)" },
            { id: 4, name: "Ø´Ø¹Ø§Ø± Ø§Ù„Ù†Ø¬Ù…Ø©", price: 75, type: "badge", icon: "â­" },
            { id: 5, name: "Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ§Ø¬", price: 150, type: "badge", icon: "ğŸ‘‘" }
        ];

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„
        window.onload = function() {
            loadUserData();
            generateMoreQuestions();
        };

        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const fullName = document.getElementById('fullName').value.trim();
            const age = document.getElementById('age').value;
            const password = document.getElementById('password').value;
            const profileImage = document.getElementById('profileImage').files[0];
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø§Ø³Ù…
            if (fullName.split(' ').length < 2) {
                document.getElementById('nameError').classList.remove('hidden');
                return;
            } else {
                document.getElementById('nameError').classList.add('hidden');
            }
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ø£Ø³ØªØ§Ø°
            isTeacher = password === '6450';
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            currentUser = {
                name: fullName,
                age: age,
                password: password,
                isTeacher: isTeacher,
                score: getUserScore(fullName) || 0,
                ownedItems: getUserOwnedItems(fullName) || []
            };
            
            // Ø­ÙØ¸ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©
            if (profileImage) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    currentUser.profileImage = e.target.result;
                    saveUserData();
                    showDashboard();
                };
                reader.readAsDataURL(profileImage);
            } else {
                saveUserData();
                showDashboard();
            }
        });

        // Ø¹Ø±Ø¶ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
        function showDashboard() {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('mainDashboard').style.display = 'block';
            
            // Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            document.getElementById('userName').textContent = currentUser.name + (currentUser.isTeacher ? ' ğŸ“' : '');
            document.getElementById('userAge').textContent = `Ø§Ù„Ø¹Ù…Ø±: ${currentUser.age} Ø³Ù†Ø©`;
            document.getElementById('userPoints').textContent = `Ø§Ù„Ù†Ù‚Ø§Ø·: ${currentUser.score}`;
            
            // Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©
            if (currentUser.profileImage) {
                document.getElementById('userAvatar').innerHTML = `<img src="${currentUser.profileImage}" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">`;
            }
            
            // Ø¹Ø±Ø¶ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø³ØªØ§Ø°
            if (currentUser.isTeacher) {
                document.getElementById('adminPanel').classList.remove('hidden');
            } else {
                document.getElementById('newsRoomCard').style.display = 'none';
            }
            
            updateLeaderboard();
        }

        // ÙØªØ­ Ø§Ù„Ø±ÙˆÙ…Ø§Øª
        function openRoom(roomType) {
            document.getElementById('mainDashboard').style.display = 'none';
            document.getElementById(roomType + 'Room').style.display = 'block';
            
            switch(roomType) {
                case 'questions':
                    loadQuestion();
                    break;
                case 'news':
                    loadNews();
                    break;
                case 'homework':
                    loadHomework();
                    break;
                case 'explanations':
                    loadExplanations();
                    break;
                case 'chat':
                    loadChat();
                    break;
                case 'leaderboard':
                    updateLeaderboard();
                    break;
                case 'store':
                    loadStore();
                    break;
                case 'profile':
                    loadProfile();
                    break;
            }
        }

        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø±ÙˆÙ…Ø§Øª
        function closeRoom() {
            const rooms = document.querySelectorAll('.room-content');
            rooms.forEach(room => room.style.display = 'none');
            document.getElementById('mainDashboard').style.display = 'block';
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
        function loadQuestion() {
            if (currentQuestionIndex >= questions.length) {
                document.getElementById('questionContainer').innerHTML = '<div class="message success">ğŸ‰ ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ù„Ù‚Ø¯ Ø£Ù†Ù‡ÙŠØª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©!</div>';
                return;
            }
            
            const question = questions[currentQuestionIndex];
            document.getElementById('currentScore').textContent = currentUser.score;
            
            const questionHTML = `
                <div class="question-container">
                    <div class="question-text">Ø§Ù„Ø³Ø¤Ø§Ù„ ${currentQuestionIndex + 1}: ${question.question}</div>
                    <div class="answers">
                        ${question.answers.map((answer, index) => 
                            `<button class="answer-btn" onclick="selectAnswer(${index})">${answer}</button>`
                        ).join('')}
                    </div>
                </div>
            `;
            
            document.getElementById('questionContainer').innerHTML = questionHTML;
            document.getElementById('questionMessage').innerHTML = '';
        }

        // Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
        function selectAnswer(selectedIndex) {
            const question = questions[currentQuestionIndex];
            const answerButtons = document.querySelectorAll('.answer-btn');
            
            answerButtons.forEach((btn, index) => {
                btn.disabled = true;
                if (index === question.correct) {
                    btn.classList.add('correct');
                } else if (index === selectedIndex && index !== question.correct) {
                    btn.classList.add('incorrect');
                }
            });
            
            if (selectedIndex === question.correct) {
                currentUser.score++;
                userScore = currentUser.score;
                document.getElementById('questionMessage').innerHTML = `
                    <div class="message success">
                        ğŸ‰ Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! Ø£Ø­Ø³Ù†Øª! Ø­ØµÙ„Øª Ø¹Ù„Ù‰ Ù†Ù‚Ø·Ø© Ø¬Ø¯ÙŠØ¯Ø©.
                    </div>
                `;
            } else {
                document.getElementById('questionMessage').innerHTML = `
                    <div class="message error">
                        ğŸ˜” Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©ØŒ Ù„Ø§ ØªÙ‚Ù„Ù‚ Ø³ØªØªØ­Ø³Ù† ÙÙŠ Ø§Ù„Ù…Ø±Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©!  

                        <strong>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©:</strong> ${question.explanation}
                    </div>
                `;
            }
            
            // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†Ù
            setTimeout(() => {
                currentQuestionIndex++;
                loadQuestion();
                updateUserPoints();
                saveUserData();
            }, 3000);
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ù‚Ø§Ø·
        function updateUserPoints() {
            document.getElementById('userPoints').textContent = `Ø§Ù„Ù†Ù‚Ø§Ø·: ${currentUser.score}`;
            document.getElementById('currentScore').textContent = currentUser.score;
            if (document.getElementById('storeScore')) {
                document.getElementById('storeScore').textContent = currentUser.score;
            }
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±
        function loadNews() {
            if (currentUser.isTeacher) {
                document.getElementById('addNewsForm').classList.remove('hidden');
            }
            
            const news = getStoredData('news') || [];
            const newsHTML = news.map(item => `
                <div class="message" style="background: white; border: 1px solid #ddd; margin-bottom: 15px;">
                    <h4>${item.title}</h4>
                    <p>${item.content}</p>
                    ${item.image ? `<img src="${item.image}" style="max-width: 100%; border-radius: 8px; margin: 10px 0;">` : ''}
                    ${item.link ? `<a href="${item.link}" target="_blank" style="color: #667eea;">ğŸ”— Ø±Ø§Ø¨Ø· Ù…ÙÙŠØ¯</a>` : ''}
                    <small style="color: #666;">Ù†Ø´Ø± Ø¨ÙˆØ§Ø³Ø·Ø©: ${item.author} - ${item.date}</small>
                    ${currentUser.isTeacher ? `<button onclick="deleteNews(${item.id})" style="background: #f44336; color: white; border: none; padding: 5px 10px; border-radius: 5px; margin-right: 10px;">Ø­Ø°Ù</button>` : ''}
                </div>
            `).join('');
            
            document.getElementById('newsContainer').innerHTML = newsHTML || '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø®Ø¨Ø§Ø± Ø­Ø§Ù„ÙŠØ§Ù‹</p>';
        }

        // Ø¥Ø¶Ø§ÙØ© Ø®Ø¨Ø±
        function addNews() {
            const title = document.getElementById('newsTitle').value;
            const content = document.getElementById('newsContent').value;
            const imageFile = document.getElementById('newsImage').files[0];
            const link = document.getElementById('newsLink').value;
            
            if (!title || !content) {
                alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰');
                return;
            }
            
            const newsItem = {
                id: Date.now(),
                title: title,
                content: content,
                link: link,
                author: currentUser.name,
                date: new Date().toLocaleDateString('ar-SA')
            };
            
            if (imageFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    newsItem.image = e.target.result;
                    saveNews(newsItem);
                };
                reader.readAsDataURL(imageFile);
            } else {
                saveNews(newsItem);
            }
        }

        function saveNews(newsItem) {
            const news = getStoredData('news') || [];
            news.unshift(newsItem);
            localStorage.setItem('news', JSON.stringify(news));
            
            // Ù…Ø³Ø­ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
            document.getElementById('newsTitle').value = '';
            document.getElementById('newsContent').value = '';
            document.getElementById('newsImage').value = '';
            document.getElementById('newsLink').value = '';
            
            loadNews();
        }

        // Ø­Ø°Ù Ø®Ø¨Ø±
        function deleteNews(newsId) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø®Ø¨Ø±ØŸ')) {
                const news = getStoredData('news') || [];
                const updatedNews = news.filter(item => item.id !== newsId);
                localStorage.setItem('news', JSON.stringify(updatedNews));
                loadNews();
            }
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª
        function loadHomework() {
            const homework = getStoredData('homework') || [];
            const homeworkHTML = homework.map(item => `
                <div class="message" style="background: white; border: 1px solid #ddd; margin-bottom: 15px;">
                    <h4>ğŸ“š ${item.title}</h4>
                    <p>${item.description}</p>
                    ${item.image ? `<img src="${item.image}" style="max-width: 100%; border-radius: 8px; margin: 10px 0;">` : ''}
                    ${item.video ? `<a href="${item.video}" target="_blank" style="color: #667eea;">ğŸ¥ Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</a>` : ''}
                    <small style="color: #666;">Ø£Ø¶ÙŠÙ Ø¨ÙˆØ§Ø³Ø·Ø©: ${item.author} - ${item.date}</small>
                </div>
            `).join('');
            
            document.getElementById('homeworkContainer').innerHTML = homeworkHTML || '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ§Ø¬Ø¨Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹</p>';
        }

        // Ø¹Ø±Ø¶ Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© ÙˆØ§Ø¬Ø¨
        function showAddHomeworkForm() {
            const form = document.getElementById('addHomeworkForm');
            form.classList.toggle('hidden');
        }

        // Ø¥Ø¶Ø§ÙØ© ÙˆØ§Ø¬Ø¨
        function addHomework() {
            const title = document.getElementById('homeworkTitle').value;
            const description = document.getElementById('homeworkDescription').value;
            const imageFile = document.getElementById('homeworkImage').files[0];
            const video = document.getElementById('homeworkVideo').value;
            
            if (!title || !description) {
                alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„ÙˆØµÙ');
                return;
            }
            
            const homeworkItem = {
                id: Date.now(),
                title: title,
                description: description,
                video: video,
                author: currentUser.name,
                date: new Date().toLocaleDateString('ar-SA')
            };
            
            if (imageFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    homeworkItem.image = e.target.result;
                    saveHomework(homeworkItem);
                };
                reader.readAsDataURL(imageFile);
            } else {
                saveHomework(homeworkItem);
            }
        }

        function saveHomework(homeworkItem) {
            const homework = getStoredData('homework') || [];
            homework.unshift(homeworkItem);
            localStorage.setItem('homework', JSON.stringify(homework));
            
            // Ù…Ø³Ø­ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
            document.getElementById('homeworkTitle').value = '';
            document.getElementById('homeworkDescription').value = '';
            document.getElementById('homeworkImage').value = '';
            document.getElementById('homeworkVideo').value = '';
            document.getElementById('addHomeworkForm').classList.add('hidden');
            
            loadHomework();
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø´Ø±ÙˆØ­Ø§Øª
        function loadExplanations() {
            const explanations = getStoredData('explanations') || [];
            const explanationsHTML = explanations.map(item => `
                <div class="message" style="background: white; border: 1px solid #ddd; margin-bottom: 15px;">
                    <h4>ğŸ“ ${item.title}</h4>
                    <p style="white-space: pre-line;">${item.content}</p>
                    ${item.image ? `<img src="${item.image}" style="max-width: 100%; border-radius: 8px; margin: 10px 0;">` : ''}
                    ${item.video ? `<a href="${item.video}" target="_blank" style="color: #667eea;">ğŸ¥ Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</a>` : ''}
                    <small style="color: #666;">Ø£Ø¶ÙŠÙ Ø¨ÙˆØ§Ø³Ø·Ø©: ${item.author} - ${item.date}</small>
                </div>
            `).join('');
            
            document.getElementById('explanationsContainer').innerHTML = explanationsHTML || '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø´Ø±ÙˆØ­Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹</p>';
        }

        // Ø¹Ø±Ø¶ Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ø´Ø±Ø­
        function showAddExplanationForm() {
            const form = document.getElementById('addExplanationForm');
            form.classList.toggle('hidden');
        }

        // Ø¥Ø¶Ø§ÙØ© Ø´Ø±Ø­
        function addExplanation() {
            const title = document.getElementById('explanationTitle').value;
            const content = document.getElementById('explanationContent').value;
            const imageFile = document.getElementById('explanationImage').files[0];
            const video = document.getElementById('explanationVideo').value;
            
            if (!title || !content) {
                alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰');
                return;
            }
            
            const explanationItem = {
                id: Date.now(),
                title: title,
                content: content,
                video: video,
                author: currentUser.name,
                date: new Date().toLocaleDateString('ar-SA')
            };
            
            if (imageFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    explanationItem.image = e.target.result;
                    saveExplanation(explanationItem);
                };
                reader.readAsDataURL(imageFile);
            } else {
                saveExplanation(explanationItem);
            }
        }

        function saveExplanation(explanationItem) {
            const explanations = getStoredData('explanations') || [];
            explanations.unshift(explanationItem);
            localStorage.setItem('explanations', JSON.stringify(explanations));
            
            // Ù…Ø³Ø­ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
            document.getElementById('explanationTitle').value = '';
            document.getElementById('explanationContent').value = '';
            document.getElementById('explanationImage').value = '';
            document.getElementById('explanationVideo').value = '';
            document.getElementById('addExplanationForm').classList.add('hidden');
            
            loadExplanations();
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø´Ø§Øª
        function loadChat() {
            const messages = getStoredData('chatMessages') || [];
            const chatHTML = messages.map(msg => `
                <div class="chat-message">
                    <strong>${msg.author}:</strong> ${msg.message}
                    <small style="color: #666; display: block; margin-top: 5px;">${msg.time}</small>
                    ${currentUser.isTeacher ? `<button onclick="deleteMessage(${msg.id})" style="background: #f44336; color: white; border: none; padding: 2px 8px; border-radius: 3px; font-size: 12px; margin-top: 5px;">Ø­Ø°Ù</button>` : ''}
                </div>
            `).join('');
            
            document.getElementById('chatContainer').innerHTML = chatHTML;
            document.getElementById('chatContainer').scrollTop = document.getElementById('chatContainer').scrollHeight;
        }

        // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©
        function sendMessage() {
            const messageInput = document.getElementById('chatMessage');
            const message = messageInput.value.trim();
            
            if (!message) return;
            
            const chatMessage = {
                id: Date.now(),
                author: currentUser.name,
                message: message,
                time: new Date().toLocaleString('ar-SA')
            };
            
            const messages = getStoredData('chatMessages') || [];
            messages.push(chatMessage);
            localStorage.setItem('chatMessages', JSON.stringify(messages));
            
            messageInput.value = '';
            loadChat();
        }

        // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ù…ÙØªØ§Ø­ Enter ÙÙŠ Ø§Ù„Ø´Ø§Øª
        function handleChatKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Ø­Ø°Ù Ø±Ø³Ø§Ù„Ø©
        function deleteMessage(messageId) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø±Ø³Ø§Ù„Ø©ØŸ')) {
                const messages = getStoredData('chatMessages') || [];
                const updatedMessages = messages.filter(msg => msg.id !== messageId);
                localStorage.setItem('chatMessages', JSON.stringify(updatedMessages));
                loadChat();
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ù„ÙˆØ­Ø© Ø§Ù„Ø£ÙˆØ§Ø¦Ù„
        function updateLeaderboard() {
            const users = getStoredData('users') || {};
            const usersList = Object.values(users).sort((a, b) => b.score - a.score).slice(0, 100);
            
            const leaderboardHTML = usersList.map((user, index) => `
                <div class="leaderboard-item">
                    <div class="rank">${index + 1}</div>
                    <div style="flex: 1;">
                        <strong>${user.name}</strong>
                        ${user.isTeacher ? '<span class="teacher-badge">Ø£Ø³ØªØ§Ø°</span>' : ''}
                        <div style="color: #666; font-size: 0.9em;">Ø§Ù„Ù†Ù‚Ø§Ø·: ${user.score}</div>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('leaderboardContainer').innerHTML = leaderboardHTML || '<p style="text-align: center; padding: 20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹</p>';
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ØªØ¬Ø±
        function loadStore() {
            document.getElementById('storeScore').textContent = currentUser.score;
            
            const storeHTML = storeItems.map(item => {
                const isOwned = currentUser.ownedItems.includes(item.id);
                const canAfford = currentUser.score >= item.price;
                
                return `
                    <div class="store-item ${isOwned ? 'owned' : ''}">
                        <h4>${item.name}</h4>
                        <div style="font-size: 2em; margin: 10px 0;">
                            ${item.type === 'frame' ? 'ğŸ–¼ï¸' : item.type === 'background' ? 'ğŸ¨' : item.icon}
                        </div>
                        <p>Ø§Ù„Ø³Ø¹Ø±: ${item.price} Ù†Ù‚Ø·Ø©</p>
                        ${isOwned ? 
                            '<button class="btn" style="background: #4CAF50;">Ù…Ù…Ù„ÙˆÙƒ</button>' :
                            `<button class="btn" onclick="buyItem(${item.id})" ${!canAfford ? 'disabled style="background: #ccc;"' : ''}>
                                ${canAfford ? 'Ø´Ø±Ø§Ø¡' : 'Ù†Ù‚Ø§Ø· ØºÙŠØ± ÙƒØ§ÙÙŠØ©'}
                            </button>`
                        }
                    </div>
                `;
            }).join('');
            
            document.getElementById('storeContainer').innerHTML = storeHTML;
        }

        // Ø´Ø±Ø§Ø¡ Ø¹Ù†ØµØ±
        function buyItem(itemId) {
            const item = storeItems.find(i => i.id === itemId);
            
            if (currentUser.score >= item.price) {
                currentUser.score -= item.price;
                currentUser.ownedItems.push(itemId);
                
                updateUserPoints();
                saveUserData();
                loadStore();
                
                alert(`ØªÙ… Ø´Ø±Ø§Ø¡ ${item.name} Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰`);
            } else {
                alert('Ù†Ù‚Ø§Ø·Ùƒ ØºÙŠØ± ÙƒØ§ÙÙŠØ© Ù„Ø´Ø±Ø§Ø¡ Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ØµØ±');
            }
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
        function loadProfile() {
            const profileHTML = `
                <div style="background: white; padding: 20px; border-radius: 10px;">
                    <h3>Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙŠ Ø§Ù„Ø´Ø®ØµÙŠØ©</h3>
                    <div style="margin: 20px 0;">
                        <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„:</label>
                        <input type="text" id="profileName" value="${currentUser.name}" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;">
                    </div>
                    <div style="margin: 20px 0;">
                        <label>Ø§Ù„Ø¹Ù…Ø±:</label>
                        <input type="number" id="profileAge" value="${currentUser.age}" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;">
                    </div>
                    <div style="margin: 20px 0;">
                        <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:</label>
                        <input type="password" id="profilePassword" placeholder="Ø§ØªØ±ÙƒÙ‡Ø§ ÙØ§Ø±ØºØ© Ø¥Ø°Ø§ Ù„Ù… ØªØ±Ø¯ ØªØºÙŠÙŠØ±Ù‡Ø§" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;">
                    </div>
                    <div style="margin: 20px 0;">
                        <label>ØªØºÙŠÙŠØ± Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©:</label>
                        <input type="file" id="profileImageUpdate" accept="image/*" style="width: 100%; padding: 10px; margin: 5px 0;">
                    </div>
                    <button class="btn" onclick="updateProfile()">Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª</button>
                    
                    <hr style="margin: 30px 0;">
                    
                    <h3>Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªÙŠ</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0;">
                        <div style="background: #f0f8ff; padding: 15px; border-radius: 8px; text-align: center;">
                            <h4>Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©</h4>
                            <div style="font-size: 2em; color: #667eea;">${currentUser.score}</div>
                        </div>
                        <div style="background: #f0f8f0; padding: 15px; border-radius: 8px; text-align: center;">
                            <h4>Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ù…Ù„ÙˆÙƒØ©</h4>
                            <div style="font-size: 2em; color: #4CAF50;">${currentUser.ownedItems.length}</div>
                        </div>
                    </div>
                    
                    <h4>Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ù…Ù„ÙˆÙƒØ©:</h4>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap; margin: 10px 0;">
                        ${currentUser.ownedItems.map(itemId => {
                            const item = storeItems.find(i => i.id === itemId);
                            return item ? `<span style="background: #e3f2fd; padding: 5px 10px; border-radius: 15px; font-size: 0.9em;">${item.name}</span>` : '';
                        }).join('')}
                    </div>
                </div>
            `;
            
            document.getElementById('profileContainer').innerHTML = profileHTML;
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
        function updateProfile() {
            const newName = document.getElementById('profileName').value.trim();
            const newAge = document.getElementById('profileAge').value;
            const newPassword = document.getElementById('profilePassword').value;
            const newImageFile = document.getElementById('profileImageUpdate').files[0];
            
            if (newName.split(' ').length < 2) {
                alert('ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ø§Ø³Ù… Ù…ÙƒÙˆÙ†Ø§Ù‹ Ù…Ù† ÙƒÙ„Ù…ØªÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
                return;
            }
            
            currentUser.name = newName;
            currentUser.age = newAge;
            
            if (newPassword) {
                currentUser.password = newPassword;
                if (newPassword === '6450') {
                    currentUser.isTeacher = true;
                }
            }
            
            if (newImageFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    currentUser.profileImage = e.target.result;
                    saveUserData();
                    showDashboard();
                    alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ Ø¨Ù†Ø¬Ø§Ø­!');
                };
                reader.readAsDataURL(newImageFile);
            } else {
                saveUserData();
                showDashboard();
                alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ Ø¨Ù†Ø¬Ø§Ø­!');
            }
        }

        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø£Ø³ØªØ§Ø°
        function clearAllChat() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø´Ø§ØªØŸ')) {
                localStorage.removeItem('chatMessages');
                if (document.getElementById('chatContainer')) {
                    loadChat();
                }
                alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„');
            }
        }

        function resetAllScores() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù†Ù‚Ø§Ø· Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø§Ø¨ØŸ')) {
                const users = getStoredData('users') || {};
                Object.keys(users).forEach(key => {
                    if (!users[key].isTeacher) {
                        users[key].score = 0;
                    }
                });
                localStorage.setItem('users', JSON.stringify(users));
                
                if (!currentUser.isTeacher) {
                    currentUser.score = 0;
                    updateUserPoints();
                }
                
                alert('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù‚Ø§Ø· Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø§Ø¨');
            }
        }

        function exportData() {
            const data = {
                users: getStoredData('users'),
                news: getStoredData('news'),
                homework: getStoredData('homework'),
                explanations: getStoredData('explanations'),
                chatMessages: getStoredData('chatMessages')
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = 'science_website_data.json';
            link.click();
            
            URL.revokeObjectURL(url);
        }

        // ÙˆØ¸Ø§Ø¦Ù Ù…Ø³Ø§Ø¹Ø¯Ø©
        function getStoredData(key) {
            try {
                return JSON.parse(localStorage.getItem(key));
            } catch {
                return null;
            }
        }

        function saveUserData() {
            const users = getStoredData('users') || {};
            users[currentUser.name] = currentUser;
            localStorage.setItem('users', JSON.stringify(users));
        }

        function loadUserData() {
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                try {
                    currentUser = JSON.parse(savedUser);
                    showDashboard();
                } catch {
                    // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªØ§Ù„ÙØ©ØŒ Ø§Ø¨Ø¯Ø£ Ù…Ù† Ø¬Ø¯ÙŠØ¯
                }
            }
        }

        function getUserScore(userName) {
            const users = getStoredData('users') || {};
            return users[userName] ? users[userName].score : 0;
        }

        function getUserOwnedItems(userName) {
            const users = getStoredData('users') || {};
            return users[userName] ? users[userName].ownedItems : [];
        }

        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
        function generateMoreQuestions() {
            const additionalQuestions = [
                {
                    question: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© Ø¨ÙŠÙ† Ø§Ù„Ù…Ø³Ø§ÙØ© ÙˆØ§Ù„Ø²Ù…Ù† ÙÙŠ Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ù†ØªØ¸Ù…Ø©ØŸ",
                    answers: ["Ø¹Ù„Ø§Ù‚Ø© Ø¹ÙƒØ³ÙŠØ©", "Ø¹Ù„Ø§Ù‚Ø© Ø·Ø±Ø¯ÙŠØ©", "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù„Ø§Ù‚Ø©", "Ø¹Ù„Ø§Ù‚Ø© ØªØ±Ø¨ÙŠØ¹ÙŠØ©"],
                    correct: 1,
                    explanation: "ÙÙŠ Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ù†ØªØ¸Ù…Ø©ØŒ Ø§Ù„Ù…Ø³Ø§ÙØ© ØªØªÙ†Ø§Ø³Ø¨ Ø·Ø±Ø¯ÙŠØ§Ù‹ Ù…Ø¹ Ø§Ù„Ø²Ù…Ù†"
                },
                {
                    question: "Ø£ÙŠ Ù…Ù† Ø§Ù„ØªØ§Ù„ÙŠ ÙŠÙ…Ø«Ù„ ØªØ³Ø§Ø±Ø¹Ø§Ù‹ Ù…ÙˆØ¬Ø¨Ø§Ù‹ØŸ",
                    answers: ["Ø³ÙŠØ§Ø±Ø© ØªØªÙˆÙ‚Ù", "ÙƒØ±Ø© ØªØ³Ù‚Ø· Ù„Ø£Ø³ÙÙ„", "Ù‚Ø·Ø§Ø± ÙŠØ³ÙŠØ± Ø¨Ø³Ø±Ø¹Ø© Ø«Ø§Ø¨ØªØ©", "Ø¯Ø±Ø§Ø¬Ø© ØªØ¨Ø·Ø¦"],
                    correct: 1,
                    explanation: "Ø§Ù„ÙƒØ±Ø© Ø§Ù„ØªÙŠ ØªØ³Ù‚Ø· Ù„Ø£Ø³ÙÙ„ ØªØ²Ø¯Ø§Ø¯ Ø³Ø±Ø¹ØªÙ‡Ø§ Ø¨ÙØ¹Ù„ Ø§Ù„Ø¬Ø§Ø°Ø¨ÙŠØ©ØŒ Ù…Ù…Ø§ ÙŠØ¹Ù†ÙŠ ØªØ³Ø§Ø±Ø¹Ø§Ù‹ Ù…ÙˆØ¬Ø¨Ø§Ù‹"
                },
                {
                    question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Ø§Ù„Ø³Ø±Ø¹Ø© ÙˆØ§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ù…ØªØ¬Ù‡Ø©ØŸ",
                    answers: ["Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙØ±Ù‚", "Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ù…ØªØ¬Ù‡Ø© ØªØ´Ù…Ù„ Ø§Ù„Ø§ØªØ¬Ø§Ù‡", "Ø§Ù„Ø³Ø±Ø¹Ø© Ø£ÙƒØ¨Ø± Ø¯Ø§Ø¦Ù…Ø§Ù‹", "Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ù…ØªØ¬Ù‡Ø© Ø£ØµØºØ± Ø¯Ø§Ø¦Ù…Ø§Ù‹"],
                    correct: 1,
                    explanation: "Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ù…ØªØ¬Ù‡Ø© ØªØ´Ù…Ù„ ÙƒÙ„Ø§Ù‹ Ù…Ù† Ø§Ù„Ù…Ù‚Ø¯Ø§Ø± ÙˆØ§Ù„Ø§ØªØ¬Ø§Ù‡ØŒ Ø¨ÙŠÙ†Ù…Ø§ Ø§Ù„Ø³Ø±Ø¹Ø© Ù…Ù‚Ø¯Ø§Ø± ÙÙ‚Ø·"
                },
                {
                    question: "Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø³Ø±Ø¹Ø© Ø¬Ø³Ù… 30 Ù…/Ø«ØŒ ÙÙƒÙ… ØªØ³Ø§ÙˆÙŠ Ø¨Ø§Ù„ÙƒÙŠÙ„ÙˆÙ…ØªØ±/Ø³Ø§Ø¹Ø©ØŸ",
                    answers: ["108 ÙƒÙ…/Ø³Ø§Ø¹Ø©", "30 ÙƒÙ…/Ø³Ø§Ø¹Ø©", "8.33 ÙƒÙ…/Ø³Ø§Ø¹Ø©", "300 ÙƒÙ…/Ø³Ø§Ø¹Ø©"],
                    correct: 0,
                    explanation: "Ù„Ù„ØªØ­ÙˆÙŠÙ„ Ù…Ù† Ù…/Ø« Ø¥Ù„Ù‰ ÙƒÙ…/Ø³Ø§Ø¹Ø© Ù†Ø¶Ø±Ø¨ ÙÙŠ 3.6: 30 Ã— 3.6 = 108 ÙƒÙ…/Ø³Ø§Ø¹Ø©"
                },
                {
                    question: "Ù…Ø§ Ù‡ÙŠ ÙˆØ­Ø¯Ø© Ù‚ÙŠØ§Ø³ Ø§Ù„ØªØ³Ø§Ø±Ø¹ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯ÙˆÙ„ÙŠØŸ",
                    answers: ["Ù…/Ø«", "Ù…/Ø«Â²", "ÙƒÙ…/Ø³Ø§Ø¹Ø©", "Ù…Â²/Ø«"],
                    correct: 1,
                    explanation: "ÙˆØ­Ø¯Ø© Ù‚ÙŠØ§Ø³ Ø§Ù„ØªØ³Ø§Ø±Ø¹ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯ÙˆÙ„ÙŠ Ù‡ÙŠ Ù…ØªØ±/Ø«Ø§Ù†ÙŠØ©Â² (Ù…/Ø«Â²)"
                }
            ];
            
            questions.push(...additionalQuestions);
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù„ØªØµÙ„ Ø¥Ù„Ù‰ 100 Ø³Ø¤Ø§Ù„
            while (questions.length < 100) {
                const randomQuestion = {
                    question: `Ø³Ø¤Ø§Ù„ Ø±Ù‚Ù… ${questions.length + 1}: Ø¥Ø°Ø§ ØªØ­Ø±Ùƒ Ø¬Ø³Ù… Ø¨Ø³Ø±Ø¹Ø© ${Math.floor(Math.random() * 50) + 10} Ù…/Ø« Ù„Ù…Ø¯Ø© ${Math.floor(Math.random() * 10) + 1} Ø«Ø§Ù†ÙŠØ©ØŒ ÙÙ…Ø§ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„Ù…Ù‚Ø·ÙˆØ¹Ø©ØŸ`,
                    answers: [],
                    correct: 0,
                    explanation: "Ø§Ù„Ù…Ø³Ø§ÙØ© = Ø§Ù„Ø³Ø±Ø¹Ø© Ã— Ø§Ù„Ø²Ù…Ù†"
                };
                
                const speed = Math.floor(Math.random() * 50) + 10;
                const time = Math.floor(Math.random() * 10) + 1;
                const correctDistance = speed * time;
                
                randomQuestion.answers = [
                    `${correctDistance} Ù…ØªØ±`,
                    `${correctDistance + Math.floor(Math.random() * 20) + 5} Ù…ØªØ±`,
                    `${correctDistance - Math.floor(Math.random() * 20) + 5} Ù…ØªØ±`,
                    `${Math.floor(correctDistance / 2)} Ù…ØªØ±`
                ];
                
                questions.push(randomQuestion);
            }
        }

        // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØµÙØ­Ø©
        window.addEventListener('beforeunload', function() {
            if (currentUser) {
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
            }
        });
    </script>
</body>
</html>
